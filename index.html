<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>RescueCards V5.6 (Expanded Cockpit)</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    
    <style>
        :root {
            --primary: #0056b3; --bg: #eceff1; --text: #263238;
            --col-ab: #0288d1; --col-c: #d32f2f; --col-d: #fbc02d; --col-e: #388e3c;
            --cat-neuro: #8e44ad; --cat-meta: #f39c12; --cat-resp: #27ae60; 
            --cat-cardio: #c0392b; --cat-trauma: #2980b9; --cat-other: #78909c;
        }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: var(--bg); margin: 0; padding-bottom: 80px; color: var(--text); }
        
        /* HEADER */
        header { 
            background: #263238; color: white; padding: 10px 12px; 
            position: sticky; top: 0; z-index: 100; box-shadow: 0 4px 6px rgba(0,0,0,0.2); 
        }
        .header-row { display: flex; align-items: center; gap: 10px; margin-bottom: 8px; }
        h1 { margin: 0; font-size: 1.1rem; font-weight: 700; white-space: nowrap; }
        input[type="text"] { 
            width: 100%; padding: 8px 12px; border-radius: 6px; border: none; 
            font-size: 0.95rem; background: #37474f; color: white; outline: none;
        }
        input::placeholder { color: #b0bec5; }

        /* FILTER */
        .filter-container { 
            display: flex; flex-wrap: nowrap; overflow-x: auto; gap: 8px; padding-bottom: 2px;
            -webkit-overflow-scrolling: touch; scrollbar-width: none; 
        }
        .filter-container::-webkit-scrollbar { display: none; }
        .filter-chip { 
            flex-shrink: 0; background: #455a64; color: #cfd8dc; padding: 5px 10px; 
            border-radius: 15px; font-size: 0.75rem; font-weight: 600; cursor: pointer; 
            border: 1px solid #546e7a; user-select: none; white-space: nowrap;
        }
        .filter-chip.active { background: #29b6f6; color: #000; border-color: #29b6f6; }
        .filter-reset { background: #c62828; color: white; border-color: #c62828; display: none; }
        .filter-reset.visible { display: inline-flex; }

        /* NAV */
        nav { position: fixed; bottom: 0; width: 100%; background: white; display: flex; border-top: 1px solid #ddd; z-index: 1000; padding-bottom: env(safe-area-inset-bottom); }
        nav button { flex: 1; padding: 10px; border: none; background: none; font-weight: 600; color: #90a4ae; font-size: 0.7rem; text-transform: uppercase; }
        nav button.active { color: var(--col-ab); background: #e1f5fe; }

        .view-section { display: none; padding: 10px; max-width: 800px; margin: 0 auto; }
        .view-section.active { display: block; animation: fadeIn 0.2s; }
        @keyframes fadeIn { from { opacity:0; transform:translateY(5px); } to { opacity:1; transform:translateY(0); } }

        /* CARD STYLES */
        .card { background: white; border-radius: 12px; margin-bottom: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); overflow: hidden; border: 1px solid #cfd8dc; }
        .card-header { padding: 10px 15px; color: white; display: flex; justify-content: space-between; align-items: center; cursor: pointer; }
        .neuro { background: var(--cat-neuro); } .meta { background: var(--cat-meta); } 
        .resp { background: var(--cat-resp); } .cardio { background: var(--cat-cardio); } 
        .trauma { background: var(--cat-trauma); } .other { background: var(--cat-other); }

        .card-img { width: 100%; height: 550px; object-fit: contain; display: block; cursor: pointer; border-bottom: 1px solid #eee; background: #f0f0f0; }

        .card-preview { padding: 12px 15px; cursor: pointer; }
        .def-text { font-style: italic; color: #546e7a; margin-bottom: 5px; font-size: 0.9rem; }
        
        .card-details { display: none; background: #fff; }
        .card-details.open { display: block; }
        
        /* SYMPTOM & EINDRUCK BOXEN */
        .symptom-box { padding: 10px 15px; border-bottom: 1px solid rgba(0,0,0,0.1); display: flex; gap: 10px; font-size: 0.9rem; font-weight: bold; }
        .box-yellow { background: #fff8e1; color: #f57f17; border-color: #ffe082; }
        .box-blue   { background: #e3f2fd; color: #0277bd; border-color: #90caf9; }
        
        /* COCKPIT (NEU: 2 Zeilen) */
        .cockpit-container { background: #f5f5f5; border-bottom: 1px solid #e0e0e0; padding: 8px 10px; display: flex; flex-direction: column; gap: 4px; }
        .cockpit-row { display: flex; gap: 4px; width: 100%; }
        
        .vital-tile { flex: 1; background: white; padding: 4px 2px; border-radius: 6px; border: 1px solid #e0e0e0; text-align: center; min-width: 0; }
        .vital-label { font-size: 0.6rem; color: #78909c; font-weight: 700; text-transform: uppercase; white-space: nowrap; }
        .vital-val { font-weight: 800; font-size: 0.9rem; color: #37474f; white-space: nowrap; }
        .trend-up { color: #d32f2f !important; } .trend-down { color: #1976d2 !important; }

        /* HYBRID UI STYLES */
        .abc-section { padding: 12px 15px; border-bottom: 1px solid #eee; }
        .abc-section.sec-ab { border-left: 5px solid var(--col-ab); }
        .abc-section.sec-c { border-left: 5px solid var(--col-c); }
        .abc-section.sec-d { border-left: 5px solid var(--col-d); }
        .abc-section.sec-e { border-left: 5px solid var(--col-e); }
        
        .sec-title { font-size: 0.75rem; font-weight: 900; text-transform: uppercase; margin-bottom: 10px; letter-spacing: 0.5px; display: flex; align-items: center; gap: 6px; }

        .info-block { margin-bottom: 12px; }
        .info-block:last-child { margin-bottom: 0; }
        .info-label-sm { font-size: 0.7rem; font-weight: 700; color: #b0bec5; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 3px; }
        .info-val-lg { font-size: 1rem; color: #263238; line-height: 1.4; font-weight: 500; }

        .micro-grid { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 12px; }
        .micro-tile { flex: 1; min-width: 80px; background: #f5f5f5; border-radius: 8px; padding: 8px 10px; border: 1px solid #eee; }
        .micro-label { font-size: 0.65rem; color: #78909c; font-weight: 700; text-transform: uppercase; display: block; margin-bottom: 2px; }
        .micro-val { font-size: 0.95rem; font-weight: 700; color: #37474f; word-break: break-word; }

        .action-bar { background: #263238; color: white; padding: 10px 15px; display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; }
        .action-item { background: rgba(255,255,255,0.1); padding: 6px 8px; border-radius: 4px; display: flex; align-items: center; gap: 6px; font-size: 0.85rem; }
        .nef-badge { background: #c62828; color: white; font-weight: bold; padding: 2px 6px; border-radius: 4px; font-size: 0.7rem; margin-left: auto; }
        .diff-box { background: #fff3e0; padding: 10px 15px; border-top: 1px solid #ffe0b2; font-size: 0.85rem; color: #e65100; }

        #status-msg { text-align: center; padding: 40px 20px; color: #666; }
        .quiz-box { background: white; padding: 20px; border-radius: 12px; text-align: center; }
        .btn { background: var(--col-ab); color: white; padding: 12px 30px; border-radius: 30px; border: none; font-size: 1rem; margin-top: 15px; cursor: pointer; width: 100%; font-weight: bold; }
        .comp-table { width: 100%; border-collapse: collapse; background: white; }
        .comp-table td { border-bottom: 1px solid #eee; padding: 10px; width: 50%; vertical-align: top; font-size: 0.85rem; }
    </style>
</head>
<body>

<header>
    <div class="header-row">
        <h1>üöë RescueCards</h1>
        <input type="text" id="search" placeholder="Suche..." onkeyup="renderCards()">
    </div>
    <div class="filter-container" id="filter-container">
        <div class="filter-chip filter-reset" onclick="resetFilters()">‚úñ Reset</div>
    </div>
</header>

<div id="status-msg"><h3>Lade Daten...</h3><p>‚è≥</p></div>

<div id="learn" class="view-section"><div id="card-container"></div></div>
<div id="compare" class="view-section">
    <div style="display:flex; gap:10px; margin-bottom:15px;">
        <select id="s1" onchange="renderCompare()" style="width:100%; padding:8px; border-radius:6px;"></select>
        <select id="s2" onchange="renderCompare()" style="width:100%; padding:8px; border-radius:6px;"></select>
    </div>
    <div id="compare-result"></div>
</div>
<div id="quiz" class="view-section">
    <div class="quiz-box">
        <h3 id="q-text" style="min-height:60px;">Lade Frage...</h3>
        <button class="btn" onclick="solveQuiz()">Aufl√∂sen</button>
        <div id="q-sol" style="display:none; margin-top:20px; text-align:left; background:#f5f5f5; padding:15px; border-radius:8px;">
            <h2 id="q-sol-title" style="margin-top:0"></h2>
            <div id="q-sol-desc"></div>
            <button class="btn" style="background:transparent; border:2px solid #000; color:#000;" onclick="nextQuiz()">Weiter</button>
        </div>
    </div>
</div>

<nav>
    <button onclick="nav('learn')" id="btn-learn">üóÇÔ∏è Karten</button>
    <button onclick="nav('compare')" id="btn-compare">‚öñÔ∏è Vergleich</button>
    <button onclick="nav('quiz')" id="btn-quiz">üß† Quiz</button>
</nav>

<script>
    const GOOGLE_CSV_LINK = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQBMZadFA7O2nMGOeaUcnEZz5MuNW2WeHdmSU_m94SI9VDdUiI8AfsJXJ-KAhtxv0zRZ6pkRIM_jj1X/pub?gid=1914308692&single=true&output=csv";
    const IMAGE_BASE_URL = "https://raw.githubusercontent.com/sGillissen/rescue-cards/main/bilder/";
    const PROXY_URL = "https://api.codetabs.com/v1/proxy?quest=" + encodeURIComponent(GOOGLE_CSV_LINK);
    
    let db = [];
    let activeFilters = new Set();

    const filterDefs = [
        { id: 'rr_high', label: 'ü©∏ RR ‚¨ÜÔ∏è', check: (i) => isHigh(i.c_blutdruck) },
        { id: 'rr_low',  label: 'ü©∏ RR ‚¨áÔ∏è', check: (i) => isLow(i.c_blutdruck) },
        { id: 'hr_high', label: '‚ù§Ô∏è Puls ‚¨ÜÔ∏è', check: (i) => isHigh(i.c_herzfrequenz) },
        { id: 'sp_low',  label: '‚òÅÔ∏è SpO2 ‚¨áÔ∏è', check: (i) => isLow(i.b_spo2) || i.b_zyanose?.includes('ja') },
        { id: 'cyan',    label: 'üîµ Zyanose', check: (i) => hasText(i.b_zyanose, 'ja', 'zyanose', 'blau') || hasText(i.c_haut, 'zyanose') },
        { id: 'temp',    label: 'üå°Ô∏è Fieber', check: (i) => isHigh(i.e_temp) || hasText(i.e_temp, 'fieber', 'hei√ü') },
        { id: 'coma',    label: 'üß† Bewusstlos', check: (i) => hasText(i.bewusstsein, 'bewusstlos', 'koma', 'somnolent') },
        { id: 'pain',    label: '‚ö° Schmerz', check: (i) => hasText(i.e_schmerz, 'ja') || hasText(i.e_nausea, 'schmerz') }
    ];

    function isHigh(val) { if(!val) return false; val = val.toLowerCase(); return val.includes('‚¨ÜÔ∏è') || val.includes('hoch') || val.includes('>') || val.includes('+'); }
    function isLow(val) { if(!val) return false; val = val.toLowerCase(); return val.includes('‚¨áÔ∏è') || val.includes('niedrig') || val.includes('<') || val.includes('-'); }
    function hasText(val, ...terms) { if(!val) return false; val = val.toLowerCase(); return terms.some(t => val.includes(t)); }

    async function init() {
        renderFilterButtons();
        try { await loadData(GOOGLE_CSV_LINK); } 
        catch (e1) { try { await loadData(PROXY_URL); } catch(e2) {} }
    }

    function renderFilterButtons() {
        const container = document.getElementById('filter-container');
        filterDefs.forEach(f => {
            const btn = document.createElement('div');
            btn.className = 'filter-chip';
            btn.innerText = f.label;
            btn.onclick = () => toggleFilter(f.id, btn);
            container.appendChild(btn);
        });
    }

    function toggleFilter(id, btnElement) {
        if(activeFilters.has(id)) { activeFilters.delete(id); btnElement.classList.remove('active'); } 
        else { activeFilters.add(id); btnElement.classList.add('active'); }
        document.querySelector('.filter-reset').classList.toggle('visible', activeFilters.size > 0);
        renderCards();
    }
    function resetFilters() {
        activeFilters.clear();
        document.querySelectorAll('.filter-chip').forEach(el => el.classList.remove('active'));
        document.querySelector('.filter-reset').classList.remove('visible');
        renderCards();
    }

    function loadData(url) {
        return new Promise((resolve, reject) => {
            Papa.parse(url, {
                download: true, header: true, skipEmptyLines: true,
                complete: function(results) {
                    db = results.data.filter(row => row.id && row.name);
                    if(db.length > 0) {
                        document.getElementById('status-msg').style.display = 'none';
                        nav('learn'); renderCards(); initCompare(); nextQuiz(); resolve();
                    }
                }
            });
        });
    }

    function formatValue(val) {
        // FALLBACK: Wenn leer, gib "-" zur√ºck, aber nicht bei formatValue Check in anderen Funktionen,
        // hier prim√§r f√ºr die Anzeige wichtig.
        if (!val || val.trim() === "") return "-";
        
        let style = "";
        if (isHigh(val)) style = "trend-up";
        if (isLow(val)) style = "trend-down";
        return `<span class="${style}">${val}</span>`;
    }

    function renderBlock(label, val) {
        if(!val || val.trim() === "") return "";
        return `<div class="info-block"><div class="info-label-sm">${label}</div><div class="info-val-lg">${formatValue(val)}</div></div>`;
    }

    function renderMicro(items) {
        const validItems = items.filter(i => i.v && i.v.trim() !== "");
        if(validItems.length === 0) return "";
        
        let html = `<div class="micro-grid">`;
        validItems.forEach(i => {
            html += `<div class="micro-tile"><span class="micro-label">${i.l}</span><span class="micro-val">${formatValue(i.v)}</span></div>`;
        });
        html += `</div>`;
        return html;
    }

    function renderCards() {
        const searchTerm = document.getElementById('search').value.toLowerCase();
        const container = document.getElementById('card-container');
        container.innerHTML = '';

        const filtered = db.filter(item => {
            const textMatch = (item.name + item.def + item.leitsymptome + item.e_symptome).toLowerCase().includes(searchTerm);
            if(!textMatch) return false;
            for (let filterId of activeFilters) {
                const def = filterDefs.find(d => d.id === filterId);
                if (def && !def.check(item)) return false;
            }
            return true;
        });

        if(filtered.length === 0) {
            container.innerHTML = '<div style="text-align:center; padding:40px; color:#90a4ae;">Keine Treffer.</div>';
            return;
        }

        filtered.forEach(item => {
            let imgSrc = item.picture;
            if(imgSrc && !imgSrc.toLowerCase().startsWith('http')) {
                imgSrc = IMAGE_BASE_URL + imgSrc;
            }
            const imageHTML = imgSrc ? `<img src="${imgSrc}" class="card-img" onclick="openCard(this)" onerror="this.style.display='none'" loading="lazy">` : '';

            // A & B
            let contentA = renderBlock('Atemwege', item.a_atemwege);
            contentA += renderBlock('Atemger√§usche', item.b_atemgeraeusche);
            
            let contentB = renderBlock('Atemnot', item.b_atemnot);
            contentB += renderMicro([
                {l: 'Zyanose', v: item.b_zyanose},
                {l: 'Halsvenen', v: item.b_halsvenen}
            ]);

            // C
            let contentC = renderBlock('Hautzustand', item.c_haut);

            // D (OHNE BZ, da jetzt im Cockpit)
            let contentD = renderBlock('Bewusstsein', item.bewusstsein);
            contentD += renderMicro([
                {l: 'GCS / AVPU', v: item.d_avpu},
                {l: 'Pupillen', v: item.d_pupillen}
            ]);
            contentD += renderMicro([
                {l: 'Kr√§mpfe', v: item.e_kraempfe},
                {l: 'L√§hmung', v: item.e_laehmung},
                {l: 'FAST / Neuro', v: item.d_fast}
            ]);
            contentD += renderBlock('Sonstiges', item.d_sonstiges);

            // E (OHNE Temp, da jetzt im Cockpit)
            let contentE = renderBlock('Spezifische Symptome', item.e_symptome);
            contentE += renderMicro([
                {l: 'Schmerz', v: item.e_schmerz},
                {l: 'Nausea', v: item.e_nausea},
                {l: 'Durst', v: item.e_durst}
            ]);
            contentE += renderBlock('Ausscheidung', item.e_harn_stuhl);

            const html = `
            <div class="card">
                <div class="card-header ${item.category}" onclick="openCard(this)">
                    <div style="display:flex; align-items:center; gap:10px;">
                        <span style="font-size:1.6rem;">${item.icon||'üöë'}</span>
                        <span style="font-weight:700; font-size:1.1rem;">${item.name}</span>
                    </div>
                    <span class="toggle-arrow" style="opacity:0.8">‚ñº</span>
                </div>
                
                ${imageHTML}
                
                <div class="card-preview" onclick="openCard(this)">
                    ${item.def ? `<div class="def-text">${item.def}</div>` : ''}
                    <div style="display:flex; justify-content: space-between; margin-top:5px; color:#78909c; font-size:0.85rem;">
                         <span>${item.nef ? 'üìû Notarzt' : ''}</span>
                    </div>
                </div>

                <div class="card-details">
                    <!-- LEITSYMPTOME (GELB) -->
                    ${item.leitsymptome ? `<div class="symptom-box box-yellow"><span class="icon">‚ö†Ô∏è</span><span class="text">${item.leitsymptome}</span></div>` : ''}
                    
                    <!-- ERSTER EINDRUCK (BLAU) -->
                    ${item.erster_eindruck ? `<div class="symptom-box box-blue"><span class="icon">üëÅÔ∏è</span><span class="text">Eindruck: ${item.erster_eindruck}</span></div>` : ''}

                    <!-- FULL COCKPIT (IMMER SICHTBAR, 2 ZEILEN) -->
                    <div class="cockpit-container">
                        <div class="cockpit-row">
                            <div class="vital-tile"><div class="vital-label">‚ù§Ô∏è Puls</div><div class="vital-val">${formatValue(item.c_herzfrequenz)}</div></div>
                            <div class="vital-tile"><div class="vital-label">ü©∏ RR</div><div class="vital-val">${formatValue(item.c_blutdruck)}</div></div>
                            <div class="vital-tile"><div class="vital-label">‚òÅÔ∏è SpO2</div><div class="vital-val">${formatValue(item.b_spo2)}</div></div>
                            <div class="vital-tile"><div class="vital-label">üí® AF</div><div class="vital-val">${formatValue(item.b_atemfrequenz)}</div></div>
                        </div>
                        <div class="cockpit-row">
                            <div class="vital-tile"><div class="vital-label">üç¨ BZ</div><div class="vital-val">${formatValue(item.d_bz)}</div></div>
                            <div class="vital-tile"><div class="vital-label">üå°Ô∏è Temp</div><div class="vital-val">${formatValue(item.e_temp)}</div></div>
                        </div>
                    </div>

                    <div class="abc-section sec-ab">
                        <div class="sec-title" style="color:var(--col-ab)">ü´Å Airway & Breathing</div>
                        ${contentA}
                        ${contentB}
                    </div>
                    
                    <div class="abc-section sec-c">
                        <div class="sec-title" style="color:var(--col-c)">‚ù§Ô∏è Circulation</div>
                        ${contentC}
                    </div>
                    
                    <div class="abc-section sec-d">
                        <div class="sec-title" style="color:#f9a825">üß† Disability</div>
                        ${contentD}
                    </div>
                    
                    <div class="abc-section sec-e">
                        <div class="sec-title" style="color:var(--col-e)">üîç Exposure & Symptome</div>
                        ${contentE}
                    </div>

                    ${(item.einteilung1 || item.einteilung2) ? `<div class="diff-box"><strong>üìå Differenzierung:</strong><br>${item.einteilung1 || ''}<br>${item.einteilung2 || ''}</div>` : ''}
                    
                    <div class="action-bar">
                        <div class="action-item"><span class="action-icon">üõèÔ∏è</span> ${item.lagerung || '-'}</div>
                        <div class="action-item"><span class="action-icon">üí®</span> ${item.o2 || '-'}</div>
                        ${item.nef ? `<div class="action-item" style="grid-column: 1/-1; background:#c62828;"><span class="action-icon">üìû</span> Notarzt</div>` : ''}
                        ${item.absaugen ? `<div class="action-item"><span class="action-icon">ü™†</span> Absaugen</div>` : ''}
                        ${item.sonstiges ? `<div class="action-item" style="grid-column: 1/-1; font-style:italic">‚ÑπÔ∏è ${item.sonstiges}</div>` : ''}
                    </div>
                </div>
            </div>`;
            container.insertAdjacentHTML('beforeend', html);
        });
    }

    function openCard(element) {
        const card = element.closest('.card');
        const details = card.querySelector('.card-details');
        const arrow = card.querySelector('.toggle-arrow');
        details.classList.toggle('open');
        if(arrow) arrow.innerText = details.classList.contains('open') ? '‚ñ≤' : '‚ñº';
    }

    function initCompare() {
        const s1 = document.getElementById('s1'); const s2 = document.getElementById('s2');
        s1.innerHTML = ''; s2.innerHTML = '';
        db.forEach(d => { const opt = `<option value="${d.id}">${d.name}</option>`; s1.insertAdjacentHTML('beforeend', opt); s2.insertAdjacentHTML('beforeend', opt); });
        if(db.length > 1) s2.value = db[1].id;
    }
    function renderCompare() {
        const id1 = document.getElementById('s1').value; const id2 = document.getElementById('s2').value;
        const d1 = db.find(x => x.id === id1); const d2 = db.find(x => x.id === id2);
        if(!d1 || !d2) return;
        const keys = [{l:'Lagerung', k:'lagerung'}, {l:'Leitsymptome', k:'leitsymptome'}, {l:'Atmung', k:'b_atemgeraeusche'}, {l:'Haut', k:'c_haut'}, {l:'Puls/RR', k:'c_blutdruck'}, {l:'Bewusstsein', k:'bewusstsein'}, {l:'Pupillen', k:'d_pupillen'}];
        let html = `<table class="comp-table">`;
        keys.forEach(row => { const v1 = d1[row.k] || '-'; const v2 = d2[row.k] || '-'; const highlight = (v1 !== v2 && v1 !== '-' && v2 !== '-') ? 'diff' : ''; html += `<tr><th colspan="2">${row.l}</th></tr><tr class="${highlight}"><td>${formatValue(v1)}</td><td>${formatValue(v2)}</td></tr>`; });
        html += `</table>`;
        document.getElementById('compare-result').innerHTML = html;
    }

    let currentQuizItem = null;
    function nextQuiz() {
        document.getElementById('q-sol').style.display = 'none';
        currentQuizItem = db[Math.floor(Math.random() * db.length)];
        const types = [`Leitsymptome:\n"${currentQuizItem.leitsymptome || '?'}"\n\nDiagnose?`, `Haut: ${currentQuizItem.c_haut}\nAtmung: ${currentQuizItem.b_atemgeraeusche}\n\nVerdacht?`];
        document.getElementById('q-text').innerText = types[Math.floor(Math.random() * types.length)];
    }
    function solveQuiz() {
        document.getElementById('q-sol').style.display = 'block';
        document.getElementById('q-sol-title').innerText = currentQuizItem.name;
        document.getElementById('q-sol-desc').innerText = `Lagerung: ${currentQuizItem.lagerung}`;
    }

    function nav(viewName) {
        document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
        document.getElementById(viewName).classList.add('active');
        document.querySelectorAll('nav button').forEach(el => el.classList.remove('active'));
        document.getElementById('btn-' + viewName).classList.add('active');
        window.scrollTo(0,0);
    }
    init();
</script>
</body>
</html>
